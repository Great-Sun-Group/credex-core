#!/bin/bash

echo "Running post-commit hook" >> post-commit.log

./update_combined_code.sh

echo "AI context updated after commit" >> post-commit.log

# Check if there are changes to ai_context directory
if git diff --exit-code ai_context; then
    echo "No changes to AI context" >> post-commit.log
else
    echo "Changes detected in AI context" >> post-commit.log
    git add ai_context
    git commit -m "Update AI context" --no-verify
    echo "AI context committed after main commit" >> post-commit.log
fi

echo "Post-commit hook completed" >> post-commit.log